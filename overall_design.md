**Testing harness\
Version 1.0\
20ᵗʰ August 2018\
Oisin Creaner**

This system is designed to provide a comparison between the output for
models of telescope performance vs calibration data from real telescopes

**[the main component is the comparison module located at this link](/comparison_module)**\
**[See the README file for information on use])(/README.md)

**Abstract**

The output from the model and from the real observation are extracted
from their respective source formats and converted into a suitable format for comparison.
Once in this format, the two datasets are compared by means of a
modular comparison system to produce an output which providesa series of graphs and plots
which allow the analysis of the fit of the model to the real data.

As a secondary feature, this also enables plotting of the variance of real observations over time, 
frequency and sky position

**Design diagram**

![Design Diagram](images/testHarness_Fig1v3.PNG)

**Figure 1: Design of the testing harness system**

**Operation**

1.  Model Data is generated by [dreamBeam](https://github.com/2baOrNot2ba/dreamBeam) 
which generates predictions of outputs of a given scope for a given target at a given time 
    1.  DreamBeam outputs data in text or image form as 
        described in [this data description document](/data_descriptions/DreamBeam_Source_data_description.md)
    2.  Text Output from this system is captured as .CSV files and used to compare with observed data
2.  Data from a telescope is saved and converted to more accessible HDF5 files by [iLiSA](https://github.com/2baOrNot2ba/iLiSA)
    1.  Data is provided by telescopes in proprietary format(s) in the case of LOFAR, that format is
        described in [this data description document](/data_descriptions/ACC_Source_data_description_0_0.md) 
    2.  This is converted to HDF5 format in the structure [described here](/data_descriptions/OSO_HDF5.md)
    3.  *Future Feature*: Some appropriate feature to automaticaly identify and remove frequencies which show extensive RFI is required, as well as a feature to eliminate transient noise spikes.  
3.  Data is extracted from the files and is compared between model and test, and an
    evaluation of the accuracy, error and other comparisons between the
    two datasets is carried out.
    1.  Data in the common dataset (*currently CSV and HDF5*)
    2.  A module described in [this software design document](/comparison_module/Comparison_Module.md) 
    the code for which is located in [this directory](/comparison_module/) 
    compares the data from real and model: calculating the difference, correlation, and RMSE 
    (*this can be extended*) to define a figure of merit 
    3.  These figures of merit can be compared across the following independent variables
        1.  Time
        2.  Altitude
        3.  Azimuth
    4.  For each of the above independent variables, plots indicating how the values and figure of merit vary with frequency against that independent variable are calculated
    5.  Output is produced in a suitable format.Initial elements include:
        1.  Flexible image File plotting
        2.  Image plots to the screen
        3.  Text output of RMSE and correlation
        4.  [More details as shown at this link](/comparison_module/outputs.md)

